<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.13) on Mon Jun 27 14:29:51 NZST 2022 -->
<title>VersioningConsumer (DSpace Parent Project 7.3-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2022-06-27">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="VersioningConsumer (DSpace Parent Project 7.3-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VersioningConsumer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.dspace.versioning</a></div>
<h2 title="Class VersioningConsumer" class="title">Class VersioningConsumer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.dspace.versioning.VersioningConsumer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../event/Consumer.html" title="interface in org.dspace.event">Consumer</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">VersioningConsumer</span>
extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>
implements <a href="../event/Consumer.html" title="interface in org.dspace.event">Consumer</a></pre>
<div class="block">When a new version of an item is published, unarchive the previous version and
 update <a href="../content/Relationship.html#latestVersionStatus"><code>Relationship.latestVersionStatus</code></a> of the relevant relationships.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Fabio Bolognesi (fabio at atmire dot com), Mark Diggory (markd at atmire dot com), Ben Bosman (ben at atmire dot com)</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">VersioningConsumer</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#consume(org.dspace.core.Context,org.dspace.event.Event)">consume</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
       <a href="../event/Event.html" title="class in org.dspace.event">Event</a>&nbsp;event)</code></th>
<td class="colLast">
<div class="block">Consume an event; events may get filtered at the dispatcher level, hiding
 it from the consumer.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doEntityTypesMatch(org.dspace.content.Item,org.dspace.content.Item)">doEntityTypesMatch</a></span>&#8203;(<a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;latestItem,
                  <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;previousItem)</code></th>
<td class="colLast">
<div class="block">Given two items, check if their entity types match.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#end(org.dspace.core.Context)">end</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx)</code></th>
<td class="colLast">
<div class="block">Signal that there are no more events queued in this event stream and
 event processing for the preceding consume calls should be finished up.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#finish(org.dspace.core.Context)">finish</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx)</code></th>
<td class="colLast">
<div class="block">Finish - free any allocated resources.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAllRelationships(org.dspace.core.Context,org.dspace.content.Item,org.dspace.content.RelationshipType)">getAllRelationships</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                   <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;item,
                   <a href="../content/RelationshipType.html" title="class in org.dspace.content">RelationshipType</a>&nbsp;relationshipType)</code></th>
<td class="colLast">
<div class="block">Get all relationships of the given type linked to the given item.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected <a href="../content/EntityType.html" title="class in org.dspace.content">EntityType</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEntityType(org.dspace.core.Context,org.dspace.content.Item)">getEntityType</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
             <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;item)</code></th>
<td class="colLast">
<div class="block">Get the entity type (stored in metadata field dspace.entity.type) of any item.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected <a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMatchingRelationship(org.dspace.content.Item,boolean,org.dspace.content.Relationship,java.util.List)">getMatchingRelationship</a></span>&#8203;(<a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;latestItem,
                       boolean&nbsp;isLeft,
                       <a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&nbsp;previousItemRelationship,
                       <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&gt;&nbsp;relationships)</code></th>
<td class="colLast">
<div class="block">From a list of relationships, find the relationship with the correct relationship type and items.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected <a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMatchingRelationship(org.dspace.content.Item,org.dspace.content.RelationshipType,org.dspace.content.Item,java.util.List)">getMatchingRelationship</a></span>&#8203;(<a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;expectedLeftItem,
                       <a href="../content/RelationshipType.html" title="class in org.dspace.content">RelationshipType</a>&nbsp;expectedRelationshipType,
                       <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;expectedRightItem,
                       <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&gt;&nbsp;relationships)</code></th>
<td class="colLast">
<div class="block">Find the relationship with the given left item, relation type and right item, from a list of relationships.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../content/RelationshipType.html" title="class in org.dspace.content">RelationshipType</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRelationshipTypes(org.dspace.core.Context,org.dspace.content.EntityType)">getRelationshipTypes</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                    <a href="../content/EntityType.html" title="class in org.dspace.content">EntityType</a>&nbsp;entityType)</code></th>
<td class="colLast">
<div class="block">Get all relationship types that have the given entity type on their left and/or right side.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initialize()">initialize</a></span>()</code></th>
<td class="colLast">
<div class="block">Initialize - allocate any resources required to operate.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reindexRelationship(org.dspace.core.Context,org.dspace.versioning.utils.RelationshipVersioningUtils.LatestVersionStatusChangelog,org.dspace.content.Relationship)">reindexRelationship</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                   <a href="utils/RelationshipVersioningUtils.LatestVersionStatusChangelog.html" title="enum in org.dspace.versioning.utils">RelationshipVersioningUtils.LatestVersionStatusChangelog</a>&nbsp;changelog,
                   <a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&nbsp;relationship)</code></th>
<td class="colLast">
<div class="block">If the <a href="../content/Relationship.html#latestVersionStatus"><code>Relationship.latestVersionStatus</code></a> of the relationship has changed,
 an "item modified" event should be fired for both the left and right item of the relationship.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#unarchiveItem(org.dspace.core.Context,org.dspace.content.Item)">unarchiveItem</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
             <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;item)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateRelationships(org.dspace.core.Context,org.dspace.content.Item,org.dspace.content.Item)">updateRelationships</a></span>&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                   <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;latestItem,
                   <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;previousItem)</code></th>
<td class="colLast">
<div class="block">Update <a href="../content/Relationship.html#latestVersionStatus"><code>Relationship.latestVersionStatus</code></a> of the relationships of both the old version and the new version
 of the item.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>VersioningConsumer</h4>
<pre>public&nbsp;VersioningConsumer()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="initialize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;initialize()
                throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../event/Consumer.html#initialize()">Consumer</a></code></span></div>
<div class="block">Initialize - allocate any resources required to operate. This may include
 initializing any pooled JMS resources. Called ONCE when created by the
 dispatcher pool. This should be used to set up expensive resources that
 will remain for the lifetime of the consumer.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../event/Consumer.html#initialize()">initialize</a></code>&nbsp;in interface&nbsp;<code><a href="../event/Consumer.html" title="interface in org.dspace.event">Consumer</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if error</dd>
</dl>
</li>
</ul>
<a id="finish(org.dspace.core.Context)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finish</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;finish&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx)
            throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../event/Consumer.html#finish(org.dspace.core.Context)">Consumer</a></code></span></div>
<div class="block">Finish - free any allocated resources. Called when consumer (via it's
 parent dispatcher) is going to be destroyed by the dispatcher pool.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../event/Consumer.html#finish(org.dspace.core.Context)">finish</a></code>&nbsp;in interface&nbsp;<code><a href="../event/Consumer.html" title="interface in org.dspace.event">Consumer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the execution context object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if error</dd>
</dl>
</li>
</ul>
<a id="consume(org.dspace.core.Context,org.dspace.event.Event)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>consume</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;consume&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                    <a href="../event/Event.html" title="class in org.dspace.event">Event</a>&nbsp;event)
             throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../event/Consumer.html#consume(org.dspace.core.Context,org.dspace.event.Event)">Consumer</a></code></span></div>
<div class="block">Consume an event; events may get filtered at the dispatcher level, hiding
 it from the consumer. This behavior is based on the dispatcher/consumer
 configuration. Should include logic to initialize any resources required
 for a batch of events.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../event/Consumer.html#consume(org.dspace.core.Context,org.dspace.event.Event)">consume</a></code>&nbsp;in interface&nbsp;<code><a href="../event/Consumer.html" title="interface in org.dspace.event">Consumer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the execution context object</dd>
<dd><code>event</code> - the content event</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if error</dd>
</dl>
</li>
</ul>
<a id="unarchiveItem(org.dspace.core.Context,org.dspace.content.Item)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unarchiveItem</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;unarchiveItem&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                             <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;item)</pre>
</li>
</ul>
<a id="updateRelationships(org.dspace.core.Context,org.dspace.content.Item,org.dspace.content.Item)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateRelationships</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;updateRelationships&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                                   <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;latestItem,
                                   <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;previousItem)</pre>
<div class="block">Update <a href="../content/Relationship.html#latestVersionStatus"><code>Relationship.latestVersionStatus</code></a> of the relationships of both the old version and the new version
 of the item.

 This method will first locate all relationships that are eligible for an update,
 then it will try to match each of those relationships on the old version of given item
 with a relationship on the new version.

 One of the following scenarios will happen:
 - if a match is found, then the "latest" status on the side of given item is transferred from
   the old relationship to the new relationship. This implies that on the page of the third-party item,
   the old version of given item will NOT be shown anymore and the new version of given item will appear.
   Both versions of the given item still show the third-party item on their pages.
 - if a relationship only exists on the new version of given item, then this method does nothing.
   The status of those relationships should already have been set to "latest" on both sides during relationship
   creation.
 - if a relationship only exists on the old version of given item, then we assume that the relationship is no
   longer relevant to / has been removed from the new version of the item. The "latest" status is removed from
   the side of the given item. This implies that on the page of the third-party item,
   the relationship with given item will no longer be listed. The old version of given item still lists
   the third-party item and the new version doesn't.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the DSpace context.</dd>
<dd><code>latestItem</code> - the new version of the item.</dd>
<dd><code>previousItem</code> - the old version of the item.</dd>
</dl>
</li>
</ul>
<a id="reindexRelationship(org.dspace.core.Context,org.dspace.versioning.utils.RelationshipVersioningUtils.LatestVersionStatusChangelog,org.dspace.content.Relationship)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reindexRelationship</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;reindexRelationship&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                                   <a href="utils/RelationshipVersioningUtils.LatestVersionStatusChangelog.html" title="enum in org.dspace.versioning.utils">RelationshipVersioningUtils.LatestVersionStatusChangelog</a>&nbsp;changelog,
                                   <a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&nbsp;relationship)</pre>
<div class="block">If the <a href="../content/Relationship.html#latestVersionStatus"><code>Relationship.latestVersionStatus</code></a> of the relationship has changed,
 an "item modified" event should be fired for both the left and right item of the relationship.
 On one item the relation.* fields will change. On the other item the relation.*.latestForDiscovery will change.
 The event will cause the items to be re-indexed by the <a href="../discovery/IndexEventConsumer.html" title="class in org.dspace.discovery"><code>IndexEventConsumer</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the DSpace context.</dd>
<dd><code>changelog</code> - indicates which side of the relationship has changed.</dd>
<dd><code>relationship</code> - the relationship.</dd>
</dl>
</li>
</ul>
<a id="doEntityTypesMatch(org.dspace.content.Item,org.dspace.content.Item)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doEntityTypesMatch</h4>
<pre class="methodSignature">protected&nbsp;boolean&nbsp;doEntityTypesMatch&#8203;(<a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;latestItem,
                                     <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;previousItem)</pre>
<div class="block">Given two items, check if their entity types match.
 If one or both items don't have an entity type, comparing is pointless and this method will return false.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>latestItem</code> - the item that represents the most recent version.</dd>
<dd><code>previousItem</code> - the item that represents the second-most recent version.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the entity types of both items are non-null and equal, false otherwise.</dd>
</dl>
</li>
</ul>
<a id="getEntityType(org.dspace.core.Context,org.dspace.content.Item)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntityType</h4>
<pre class="methodSignature">protected&nbsp;<a href="../content/EntityType.html" title="class in org.dspace.content">EntityType</a>&nbsp;getEntityType&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                                   <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;item)</pre>
<div class="block">Get the entity type (stored in metadata field dspace.entity.type) of any item.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>item</code> - the item.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entity type.</dd>
</dl>
</li>
</ul>
<a id="getRelationshipTypes(org.dspace.core.Context,org.dspace.content.EntityType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRelationshipTypes</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../content/RelationshipType.html" title="class in org.dspace.content">RelationshipType</a>&gt;&nbsp;getRelationshipTypes&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                                                      <a href="../content/EntityType.html" title="class in org.dspace.content">EntityType</a>&nbsp;entityType)</pre>
<div class="block">Get all relationship types that have the given entity type on their left and/or right side.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the DSpace context.</dd>
<dd><code>entityType</code> - the entity type for which all relationship types should be found.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of relationship types (possibly empty), or null in case of error.</dd>
</dl>
</li>
</ul>
<a id="getAllRelationships(org.dspace.core.Context,org.dspace.content.Item,org.dspace.content.RelationshipType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllRelationships</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&gt;&nbsp;getAllRelationships&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx,
                                                 <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;item,
                                                 <a href="../content/RelationshipType.html" title="class in org.dspace.content">RelationshipType</a>&nbsp;relationshipType)</pre>
<div class="block">Get all relationships of the given type linked to the given item.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the DSpace context.</dd>
<dd><code>item</code> - the item.</dd>
<dd><code>relationshipType</code> - the relationship type.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of relationships (possibly empty), or null in case of error.</dd>
</dl>
</li>
</ul>
<a id="getMatchingRelationship(org.dspace.content.Item,boolean,org.dspace.content.Relationship,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchingRelationship</h4>
<pre class="methodSignature">protected&nbsp;<a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&nbsp;getMatchingRelationship&#8203;(<a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;latestItem,
                                               boolean&nbsp;isLeft,
                                               <a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&nbsp;previousItemRelationship,
                                               <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&gt;&nbsp;relationships)</pre>
<div class="block">From a list of relationships, find the relationship with the correct relationship type and items.
 If isLeft is true, the provided item should be on the left side of the relationship.
 If isLeft is false, the provided item should be on the right side of the relationship.
 In both cases, the other item is taken from the given relationship.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>latestItem</code> - the item that should either be on the left or right side of the returned relationship (if any).</dd>
<dd><code>isLeft</code> - decide on which side of the relationship the provided item should be.</dd>
<dd><code>previousItemRelationship</code> - the relationship from which the type and the other item are read.</dd>
<dd><code>relationships</code> - the list of relationships that we'll search through.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the relationship that satisfies the requirements (can only be one or zero).</dd>
</dl>
</li>
</ul>
<a id="getMatchingRelationship(org.dspace.content.Item,org.dspace.content.RelationshipType,org.dspace.content.Item,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchingRelationship</h4>
<pre class="methodSignature">protected&nbsp;<a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&nbsp;getMatchingRelationship&#8203;(<a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;expectedLeftItem,
                                               <a href="../content/RelationshipType.html" title="class in org.dspace.content">RelationshipType</a>&nbsp;expectedRelationshipType,
                                               <a href="../content/Item.html" title="class in org.dspace.content">Item</a>&nbsp;expectedRightItem,
                                               <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../content/Relationship.html" title="class in org.dspace.content">Relationship</a>&gt;&nbsp;relationships)</pre>
<div class="block">Find the relationship with the given left item, relation type and right item, from a list of relationships.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expectedLeftItem</code> - the relationship that we're looking for has this item on the left side.</dd>
<dd><code>expectedRelationshipType</code> - the relationship that we're looking for has this relationship type.</dd>
<dd><code>expectedRightItem</code> - the relationship that we're looking for has this item on the right side.</dd>
<dd><code>relationships</code> - the list of relationships that we'll search through.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the relationship that satisfies the requirements (can only be one or zero).</dd>
</dl>
</li>
</ul>
<a id="end(org.dspace.core.Context)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>end</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;end&#8203;(<a href="../core/Context.html" title="class in org.dspace.core">Context</a>&nbsp;ctx)
         throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../event/Consumer.html#end(org.dspace.core.Context)">Consumer</a></code></span></div>
<div class="block">Signal that there are no more events queued in this event stream and
 event processing for the preceding consume calls should be finished up.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../event/Consumer.html#end(org.dspace.core.Context)">end</a></code>&nbsp;in interface&nbsp;<code><a href="../event/Consumer.html" title="interface in org.dspace.event">Consumer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the execution context object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if error</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VersioningConsumer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2022 <a href="https://dspace.org">LYRASIS</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
